
<div style="direction:rtl; font-size:30px; text-align:center; font-weight: bold;" > 
ุชุญููู ุงุณุชูุดุงูู ูุงุณุชุฎุฏุงู ุงููุฌูู ุงูุชุนุจูุฑูุฉ ูู ุงููุฌุชูุน ุงูุณุนูุฏู (ุนุจุฑ ูููุน ุชููุชุฑ)
</div>

<div style="direction:rtl; font-size:20px; text-align:center; font-style: italic" > 

ุจููู: ููุฏ ุงูุญุงุฒูู (<a href="https://twitter.com/fahd09">Twitter</a> | <a href="https://github.com/fahd09">Github</a>)

</div>

<div style="direction:rtl"> 
ุดูู ุงูุงูุชุดุงุฑ ุงูุนุงููู ูููุฌูู ุงูุชุนุจูุฑูุฉ - ุงูุชู ุชุนุฑู ุจุงูุงูููุฌู- ุจุฏุงูุฉ ุซูุฑุฉ ุฌุฏูุฏุฉ ูู ูุถุงุก ุงููุบุฉ ุงูุงููุชุฑูููุฉุ ุญูุซ ุฃุตุจุญุช ูุณููุฉ ูุบููุฉ ูุชูุงุตููุฉ ูุง ุบูู ุนููุง ุฎุตูุตุงู ูุฏู ุงูุฃุฌูุงู ุงูุดุงุจุฉ.

ูู ูุฐุง ุงูุชุญููู ูุญุงูู ุฃู ููุชูุณ ุฃุจุนุงุฏ ูุฐ ุงูุชุบูุฑ ูู ุฃุญุฏ ุฃุดูุฑ ููุงูุน ุงูุชูุงุตู ุงูุงููุชุฑูููุ ุชููุชุฑ. ุญูุซ ุณูููู ุจูุฑุงุกุฉ ุนุฏุฏ ุถุฎู ูู ุงูุชุบุฑูุฏุงุช ููู ูุงูุฉ ููุงุทู ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ ููู ุซู ุงูุจุญุซ ุนู ุงููุฌูู ุงูุชุนุจูุฑูุฉ ูุชุญููู ูุง ูููู ุฃู ุชุนูุณู ูู ูุชุบูุฑุงุช ุงุฌุชูุงุนูุฉ.

</div>

<div style="direction:rtl"> 
ุณูููู ุฃููุงู ุจุงุณุชูุฑุงุฏ ุงูููุชุจุงุช ุงููุงุฒูุฉ ูู ุจุงูุซูู ูุชุซุจูุช ุจุนุถ ุงููุชุบูุฑุงุช..
</div>


```python
import re
import numpy as np
import pandas as pd

# Visualization
import matplotlib.pyplot as plt
import seaborn as sns

plt.style.use('seaborn')
%matplotlib inline


from sklearn.feature_extraction.text import CountVectorizer
import nltk
```

<div style="direction:rtl"> 
ุชู ุฌูุน ุงูุชุบุฑูุฏุงุช ูุงูุชุงูู. ุฃููุงูุ ุฌูุฒุช ูุงุฆูุฉ ุจุฃุณูุงุก ุจุนุถ ุงููุฏู ูุน ุฎุทูุท ุงูุทูู ูุฎุทูุท ุงูุนุฑุถ. ุซู ุชู ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ ุงูุจุฑูุฌูุฉ ููููุน ุชููุชุฑ (Twitter Search API) ูุฏุนููุงู ุจููุชุจุฉ (Tweepy) ูู ุจุงูุซูู ููุฑุงุกุฉ ุขูุงู ุงูุชุบุฑูุฏุงุช ุงูุชู ุชุญุชูู ุนูู ุฃู ูุฌู ุชุนุจูุฑู ุถูู ูุงุฆูุฉ 74 ูุฌู ุชุนุจูุฑู ุดุงุฆุน. ุซู ุญูุธุช ูุชุงุฆุฌ ุงูุจุญุซ ูู ุฌุฏูู ูุณุชูู ูุญุชูู ุนูู ุงููุฏููุฉุ ุชุงุฑูุฎ ุงูุชุบุฑูุฏุฉุ ูุต ุงูุชุบุฑูุฏุฉ ูุฃุฎูุฑุงู ูุตุฏุฑ ุงูุชุบุฑูุฏุฉ (ุงูุจุฑูุงูุฌ ุงููุณุชุฎุฏู ููุชุงุจุชูุง). ุจุงูุทุจุนุ ูุง ุบูู ุนู ููุชุจุฉ pandas ูู ุงูุชุนุงูู ูุน ุงูุฌุฏุงูู.
<br /> <br />
ููู ุงุณุชูุฑุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุทุจุงุนุฉ ุฑุฃุณ ุงูุฌุฏูู ููุชุฃูุฏ ูู ุณูุงูุฉ ุงูุจูุงูุงุช..
</div>


```python
tweets = pd.read_csv('./data/tweets_emojis_dataset_74emojis.csv', encoding='utf-8')
```


```python
tweets.shape
```




    (140656, 4)




```python
tweets.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>city</th>
      <th>created_at</th>
      <th>text</th>
      <th>source</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Riyadh</td>
      <td>Wed Jul 12 18:47:24 +0000 2017</td>
      <td>#ุงูุณูู_ูููู_ุงูุฎูุดู\n\nูููู ุงููุง ูููุงุช ูุคุซุฑุฉ ุชุช...</td>
      <td>Twitter Web Client</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Riyadh</td>
      <td>Wed Jul 12 18:46:49 +0000 2017</td>
      <td>ูุฅู ุฃุญุจูููู ุฃููุงู ููู ูุญุจูููู ุฅูุง ููุทุฑุฉ ูู ุจุญุฑูโค๏ธ</td>
      <td>Twitter for iPhone</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Riyadh</td>
      <td>Wed Jul 12 18:46:49 +0000 2017</td>
      <td>ุงูุจูุช ุงูุงุฎูุฑ ูุฎุชุตุฑ ูู ุงููุนุงูุงุฉ โค๏ธโค๏ธ๐ข https://t...</td>
      <td>Twitter for iPhone</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Riyadh</td>
      <td>Wed Jul 12 18:46:31 +0000 2017</td>
      <td>ููุง ููุง โคโค๐ข miss you \nุงูุทูู ุญูุงูู ุซุงููู ุงูุถู ...</td>
      <td>Twitter for Android</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Riyadh</td>
      <td>Wed Jul 12 18:46:30 +0000 2017</td>
      <td>ููุจ ููุจุจุจุจูโค๏ธโค๏ธโค๏ธโค๏ธ.</td>
      <td>Twitter for iPhone</td>
    </tr>
  </tbody>
</table>
</div>



<div style="direction:rtl"> 
ูููุง ูุนุฑู ูููุฉ ุงูุชุบุฑูุฏุงุช ุงููุฒุนุฌุฉ (ุงูุณุจุงู) ูู ุชููุชุฑ ุงูุนุฑุจู. ุงุจุชุฏุง ูู " ุชุจู ูููุญุณ ูุฎูุ" ุฅูู ุงูุฅุนูุงูุงุช ุงูุบุซูุซุฉ ููุฑูุฑุงู ุจุญุณุงุจุงุช ุงูุฃุฏุนูุฉ ูุงูุฃุฐูุงุก ูุงูุชู ุณุฑุนุงู ูุง ุชุตู ุฅูู ุฃุนุฏุงุฏ ูุชุงุจุนูู ูุจูุฑุฉ ูุชูุจุงุน ูุฑุฉ ุฃุฎุฑู ููู ุฃุญุจ ุจุฑูู ุงูุดูุฑุฉ. ุนูู ุฃูุฉ ุญุงูุ ููุง ุทุฑููุฉ ุจุณูุทุฉ ููุนุงูุฉ ูููุชุฑุฉ ุงูุชุบุฑูุฏุงุช ุงููุฒุนุฌุฉ ูุฐูู ุจุชุญุฏูุฏ ูุตุฏุฑ ุงูุชุบุฑูุฏุฉ. ุฅู ููุช ููุชูุงู ุจูุฌุงู ุชุญููู ุชุบุฑูุฏุงุช ุชููุชุฑ ูุชูุงุฌู ูุดููุฉ ูู ุงูุชุบุฑูุฏุงุช ุงููุฒุนุฌุฉ ููุฏู ุฃููุงุฑ ุฃุฎุฑู ููููุฉ ูุง ุฃูุงูุน ูู ูุดุงุฑูุชูุงุ ูููู ูุฐู ุงูุทุฑููุฉ ุฃุฏูุง (ุงูููุชุฑุฉ ุจุงููุตุฏุฑ) ูู ุงูุทุฑููุฉ ุงูุฃูุซุฑ ูุนุงููุฉ.
</div>


```python
good_sources = ['Twitter Web Client', 'Twitter for iPhone', 'Twitter for Android', 'Twitter for iPad', 'Twitter Lite']
```


```python
tweets = tweets[tweets.source.isin(good_sources)]
```

<div style="direction:rtl"> 
ูุฅุฌุฑุงุก ุงุญุชูุงุทูุ ุณูููู ุจุญุฐู ุงูุตููู ุงูููุฑุฑุฉ ุฅู ูุงู ููุงู ุตููู ููุฑุฑุฉ ุญุชู ูุญูู ูู ุตู ุนูู ุชุบุฑูุฏุฉ ูุฑูุฏุฉ ูุบูุฑ ููุฑุฑุฉ. ููู ุฐูู ุทุจุงุนุฉ ุนุฏุฏ ุงูุชุบุฑูุฏุงุช ูู ุงูุฌุฏูู ุฃูุง ููู 134763 ููู ุนุฏุฏ ูุง ุจุฃุณ ุจู ูุบุฑุถ ุงูุงุณุชูุดุงู
</div>


```python
tweets.drop_duplicates(inplace=True)
tweets.reset_index(inplace=True, drop=['index'])
```


```python
print('Total number of tweets: ', len(tweets))
```

    Total number of tweets:  134763


<div style="direction:rtl; font-size:25px; text-align:right; font-weight: bold;" > 
ุชูุธูู ุงูุจูุงูุงุช
</div>

<div style="direction:rtl"> 
ูู ุงูุฎุงูุงุช ุงูุชุงููุฉุ ุณูููู ุจุฃุตุนุจ ูููุฉ ูู ูุฌุงู ุชุญููู ุงูุจูุงูุงุชุ ุฃูุง ูู ุชูุธูู ุงูุจูุงูุงุช. ูุง ูุฒูุฏ ุงููููุฉ ุตุนูุจุฉ ูู ุชูุธูู ุงููุตูุต ุงูุนุฑุจูุฉ ูุธุฑุงู ููุฌูุฏ ุงููุซูุฑ ูู ุงูุฃุฎุทุงุก ุงูุฅููุงุฆูุฉ ูู ุงููุตูุต ุงูุนุฑุจูุฉ ูุงูุฒุฎุงุฑู ููุง ุฅูู ุฐูู.

<br /> <br /> 

ููุงู ุงููุซูุฑ ูู ุงูุฎุทูุงุช ุงูุชู ูููู ุนูููุง ูู ูููุฉ ุชูุธูู ูุต ุงูุชุบุฑูุฏุงุช ููููู ุงูุชุตุฑุช ุนูู ุฎุทูุงุช ุฃุณุงุณูุฉ ุฃุนุชูุฏ ุฃููุง ูุงููุฉ ูุฅุนุทุงุก ูุชุงุฆุฌ ุนูู ูุฏุฑ ูุง ุจุฃุณ ุจู ูู ุงูุฏูุฉ ูููุฌุงูุงุช ุงูุนุงูุฉ. ุจุงูููุงุณุจุฉุ ูุญู ูู ูุญุชุงุฌ ุฅูู ุฃู ูุตูุต ูู ูุฐู ุงูุชุฏูููุฉ ุณูู ุงููุฌูู ุงูุชุนุจูุฑูุฉ ( ูุงูุชู ูุง ุชุณุชุฏุนู ูู ูุฐู ุงูุฎุทูุงุช ุนูู ุฃูุฉ ุญุงู). ูููู ูุฃูู ุฃูุถุงู ููุช ุจุงูุนุฏูุฏ ูู ุงูุชุญูููุงุช ุงูุฌุงูุจูุฉ ุงููุชุนููุฉ ุจูุตูุต ุงูุชุบุฑูุฏุงุช ูุงูุชู ูุฏ ูุง ูุชุณุน ุงููุฌุงู ููุญุฏูุซ ุนููุง.

</div>


```python
def denoise_arabic(text):
    noise = re.compile(""" ู    | # Tashdid
                             ู    | # Fatha
                             ู    | # Tanwin Fath
                             ู    | # Damma
                             ู    | # Tanwin Damm
                             ู    | # Kasra
                             ู    | # Tanwin Kasr
                             ู    | # Sukun
                             ู     # Tatwil/Kashida
                         """, re.VERBOSE)
    text = re.sub(noise, '', text)
    return text

def normalize_arabic(text):
    text = re.sub("[ุฅุฃูฑุขุง]", "ุง", text, flags=re.MULTILINE)
    text = re.sub("ู", "ู", text, flags=re.UNICODE)
    text = re.sub("ุค", "ุก", text, flags=re.UNICODE)
    text = re.sub("ุฆ", "ุก", text, flags=re.UNICODE)
    return text

def clean_tweet(text):
    URL_re = r'(http|https|ftp)://[a-zA-Z0-9\\./]+' # replace URLs
    HASH_re = r'#(\w+)' # replace Hashtags
    HANDLE_re = r'@(\w+)' # replace Handles
    REPUNC_re = r'[\?\.\!]+(?=[\?\.\!])' # normalize repeating punctuations (e.g., ?? or !!!)
    RECHAR_re = r'(\w)\1{1,}' # remove repeating charachters 
    NEWLINE_re = r'[\n]+' # remove new lines 
    NUM_CHARS_AR_re = r'[ูกูขูฃูคูฅูฆูงูจูฉูุ!ูช:ุุ.]+'
    NUM_CHARS_EN_re = r'[0123456789!"$%&\\\'()*+,-.;<>=?@[]^_`{โ}โโโโขโน|~ยซยฐยปห ฬฎ ฬฏ]+'
    WHITE_SPACE_re = r'\s+'
    
    text = re.sub(URL_re,  r'', text, flags=re.UNICODE)
    text = re.sub(HASH_re,  r'', text, flags=re.UNICODE)
    text = re.sub(HANDLE_re,  r'', text, flags=re.UNICODE)
    text = re.sub(REPUNC_re,  r' ', text, flags=re.UNICODE)
    text = re.sub(RECHAR_re,  r'\1', text, flags=re.UNICODE)
    text = re.sub(NEWLINE_re,  r'', text, flags=re.UNICODE)
    text = re.sub(NUM_CHARS_AR_re,  r'', text, flags=re.UNICODE)
    text = re.sub(NUM_CHARS_EN_re,  r'', text, flags=re.UNICODE)
    text = re.sub(WHITE_SPACE_re,  r' ', text, flags=re.UNICODE)
    
    return text

tweets.text = tweets.text.apply(lambda x: denoise_arabic(str(x)))
tweets.text = tweets.text.apply(lambda x: normalize_arabic(str(x)))
tweets.text = tweets.text.apply(lambda x: clean_tweet(str(x)))
toremove = '! ... ? ! \u200b ...  ?  y ึ โคต โ โ โ โฅ เผบ เผป โ เฟ | แ\u200b \u200c \u200d โ โ โ โข โน \u2066 \u2067 \u2069 โฃ โ โด โฃ โ โ โ โ โ ! " # $ % & \' ( ) * + , - ... / 0 1 10 10/10 12 13 1373 14 140ุฌุฑุงู 15 16 17 17,0 18 19 1935 2 20 2015 2017 2020 2030 21 24 25 26 27 28 2leh_q 3 30 36 4 40 5 5/5 50 6 60 61 7 7/7 70 8 80 9 90 ; < = > ? @ [ ] ^ _ _20 ` { } ~ ยซ ยฐ ยป ห ฬฎ ฬฏ'        
regex = re.compile("(" + "|".join(map(re.escape, toremove.split(' '))) + ")")
tweets.text = tweets.text.apply(lambda x: re.sub(regex, r'', x))
tweets.text = tweets.text.apply(lambda x: re.sub(r'[0123456789A-Za-z?!]', r'', x))
```

<div style="direction:rtl"> 
ุจุนุฏ ุฃู ุงูุชููุช ูู ุชูุธูู ุงููุตูุตุ ุงูุชุดูุช ุฃู ุฎุงูุฉ " ุงููุฏููุฉ" ูู ุนุฏุฏ ูููู ุฌุฏุงู ูู ุงูุตููู ูู ููู ุตุญูุญุง. ูุชุณููุฉ ุงูุฃูุฑุ ุณููุฑุฃ ุฌุฏูู ุงููุฏู ุซู ูููุชุฑ ูู ุงูุตููู ุงูุฎุงุทุฆุฉ.
</div>


```python
cities = pd.read_csv('./data/cities_lat_long.csv')
tweets = tweets[tweets.city.isin(cities.city.tolist())]
tweets.reset_index(inplace=True, drop=['index'])
```

<div style="direction:rtl"> 
ูุฐู ูู ูุงุฆูุฉ ุงููุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ..
</div>


```python
tweets.city.unique()
```




    array(['Riyadh', 'Tabuk', 'Jeddah', 'Hail', 'Mecca', 'Medina', 'Jubail',
           'Hofuf', 'Jazan', 'Al-Kharj', 'Taif', 'Qatif', 'Dammam', 'Abha',
           'Khamis Mushait', 'Najran', 'Buraidah', 'Yanbu', 'Khobar'], dtype=object)



<div style="direction:rtl; font-size:25px; text-align:right; font-weight: bold;" > 
ุชุญููู ุงูุจูุงูุงุช ุงูุงุณูุชุดุงูู (Exploratory Data Analysis)
</div>

<div style="direction:rtl"> 
ูุจุฏุฃ ุงูุขู ุงุณุชูุดุงู ุงูุจูุงูุงุช. ุงุณุชูุดุงู ุงูุจูุงูุงุช ูู ุนูููุฉ ุฅุจุฏุงุนูุฉ ููุถูููุฉ ูู ุงูููุงู ุงูุฃููุ ุฅุฐุง ูุง ููุฌุฏ ููุง ุฃู ููุงุนุฏ ุชุญูููุง ููุง ูุจุงุฏุฆ ุชูู ุนูุฏูุง. ุงููุฏู ูู ุฃู ูููู ุจููุฉ ุงูุจูุงูุงุช ูุทุจูุนุชูุง ุจุดูู ุฃูุถู. ุชููู ูุฐู ุงููุฑุญูุฉ ุจุดูู ุฃุณุงุณู ุนูู ุงูุชุณุงุคูุงุช ุงูุชู ููุฏ ุงูุฅุฌุงุจุฉ ุนููุง. ุฃุฏูุงู ุณุฑุฏุช ุฃุจุฑุฒ ุงูุฃุณุฆูุฉ ุงูุชู ุทุงููุง ูุงูุช ุญุงุถุฑุฉ ูู ุฐููู ูุฏูุนุชูู ููููุงู ุจูุฐุง ุงููุดุฑูุน..
<br>
<ul>
<li>ูุงูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ูู ุฌููุน ุงููุฏู ููุงูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงูุฃูู ุดููุนุงูุ ููู ุชุดุจู ูุฐู ุงููุงุฆูุฉ ูููุน <a href="http://emojitracker.com">EmojiTracker</a> ุงููุฎุชุต ุจุฑุตุฏ ุงููุฌูู ุงูุชุนุจูุฑูุฉ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ูู ูููุน ุชููุชุฑุ</li>
<li>ูุงูู ุงููุฏู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ููุฑููุฒ ุงูุชุนุจูุฑูุฉ ููุงูู ุงููุฏู ุงูุฃูู ุงุณุชุฎุฏุงูุงู ููุฑููุฒ ุงูุชุนุจูุฑูุฉุ</li>
<li>ูู ููุงู ุฑููุฒ ุชุนุจูุฑูุฉ ูุญุฏุฏุฉ ุชุณุชุฎุฏู ุจุดูู ุฃูุซุฑ ูู ูู ูุฏููุฉุ ูุซูุงู ูู ููุงู ุฑููุฒ ุชุนุจูุฑูุฉ ูุณุชุฎุฏููุง ุณูุงู ุฌุฏุฉ ุจูุณุจุฉ ุฃุนูู ูู ุณูุงู ุงูุฏูุงูุ</li>
<li>ููุงู ุฑููุฒ ุชุนุจูุฑูุฉ "ุฅูุฌุงุจูุฉ" ูุซู ุงูููุจ ูุงููุฑุฏ ูุงููุฌู ุงูุถุงุญูุ ุจูููุง ููุงู ุฑููุฒ ุชุนุจูุฑูุฉ ุณูุจูุฉ ูุซู ุงูููุจ ุงูููุณูุฑ ูุงููุฌู ุงูุจุงูู ูุบูุฑูุง. ูู ูุณุชุทูุน ูุนุฑูุฉ ุฃู ุงููุฏู ุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ููุฑููุฒ ุงูุฅูุฌุงุจูุฉ ูุฃููุง ุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ููุฑููุฒ ุงูุณูุจูุฉุ</li>
<li>ุฃูุถุงูุ ุจูุง ุฃู ูุฏููุง ูุนูููุงุช ุญูู ููุช ูุชุงุจุฉ ุงูุชุบุฑูุฏุงุชุ ูู ุญุฏูุซ ุงูููู ูุดุจู ุญุฏูุซ ุงูููุงุฑุ</li>
</ul>
<br>
ูุง ุฃุญุจ ุฃู ุฃุณุชุทุฑุฏ ูู ุงูุฃุณุฆูุฉ ุงูุชู ูููููุง ุงูุจุญุซ ุนููุง ุญูุซ ุฃู ูุฐู ุงูุจูุงูุงุช ุบููุฉ ูุซุฑูุฉ ุฌุฏุงู. ูู ูุฐู ุงูุฃุณุฆูุฉ ููุญู ูู ูุณุชุฎุฏู ุจุนุฏ ูุตูุต ุงูุชุบุฑูุฏุงุช ุฃู ุนูุงูุงุช ุงููุบุฑุฏูู ุจุจุนุถูู ุงูุจุนุถ ูุบูุฑ ุฐูู ูู ุงูุฃุณุฆูุฉ ุงูุชู ุชุตูุญ ููุดุงุฑูุน ูุงุฏูุฉ. ูู ูุฐุง ุงููุดุฑูุน ุณูู ูุฑูุฒ ููุท ุนูู ุฃููุงุท ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุจูู ูุฌููุนุฉ ูู ูุฏู ุงูููููุฉ..
<br/> <br/>
ุงูุขู ุณูุจุฏุฃ ุจุชุฌููุฒ ุงูุจูุงูุงุช ุจุดูู ููุงุณุจ ููุฅุฌุงุจุฉ ุนู ุงูุฃุณุฆูุฉ. ุจูู ุจุณุงุทุฉุ ุณูุฌูุฒ ุฌุฏููุงู ุขุฎุฑ ููุชุบุฑูุฏุงุช ุจุญูุซ ุชุจูู ุงูุตููู ุชูุซู ุงูุชุบุฑูุฏุงุช ูููู ุงูุฃุนูุฏุฉ ูุฐู ุงููุฑุฉ ุชูุซู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ. ููู ุฑูุฒ ุชุนุจูุฑู ูุณุชุฎุฏู ุณูููู ูู ูููุฉ 1 ูููุง ุณุชููู ุงูุจุงููุฉ 0. ููู ูุฐุง ุงูุฌุฏูู ูุณุชุทูุน ุงููุถู ูุฏูุงู ูู ุงูุชุญููู. 

</div>


```python
emojis_to_extract = 'โ โ โ โ โ โ โ โ โ โน โบ โป โ โ โ โก โฅ โจ โฉ โช โ โ โ โก โซ โฝ โ โ โ โ โ โ โ โ โจ โฟ โ โ โ โ โ โ โ โ โฃ โค โฅ โคต โฌ โญ ๏ธ ๐ฆ ๐ง ๐จ ๐ช ๐ฌ ๐ญ ๐ฎ ๐ฐ ๐ฑ ๐ฒ ๐ณ ๐ต ๐ถ ๐ท ๐ธ ๐น ๐บ ๐ผ ๐พ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ค ๐ฅ ๐ง ๐จ ๐ฌ ๐ฑ ๐ฒ ๐ด ๐ท ๐ธ ๐น ๐บ ๐ป ๐ผ ๐พ ๐ฟ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ฅ ๐ฆ ๐ซ ๐ญ ๐ฐ ๐ณ ๐บ ๐ป ๐ผ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ค ๐ง ๐จ ๐ฌ ๐ญ ๐ต ๐ถ ๐ท ๐น ๐ป ๐ผ ๐ ๐ ๐ ๐ณ ๐น ๐ป ๐ผ ๐ฝ ๐พ ๐ฟ ๐ ๐ ๐ฅ ๐ธ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ง ๐จ ๐ฉ ๐ช ๐ญ ๐ฐ ๐ต ๐ถ ๐ธ ๐ป ๐ผ ๐ฝ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ก ๐ข ๐ฃ ๐ค ๐ฅ ๐ฆ ๐ง ๐จ ๐ฉ ๐ช ๐ซ ๐ฌ ๐ญ ๐ฏ ๐ฐ ๐ต ๐ธ ๐ ๐ ๐ ๐ ๐ ๐ ๐ฃ ๐ฉ ๐ฎ ๐ฏ ๐ฑ ๐ฒ ๐ท ๐ป ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ฅ ๐ช ๐ซ ๐ด ๐ต ๐ถ ๐น ๐ป ๐ ๐ ๐ ๐ ๐ ๐บ ๐ ๐ ๐ ๐ ๐ค ๐ ๐ ๐ฃ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ก ๐ข ๐ฃ ๐ค ๐ฅ ๐ฆ ๐ง ๐จ ๐ฉ ๐ช ๐ซ ๐ฌ ๐ญ ๐ฎ ๐ฏ ๐ฐ ๐ฑ ๐ฒ ๐ณ ๐ด ๐ถ ๐ท ๐น ๐ป ๐ผ ๐ฝ ๐พ ๐ฟ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ ๐ซ ๐ฌ ๐ถ ๐ ๐ค ๐ค ๐ค ๐ค ๐ค ๐ค ๐ค ๐ค ๐ค ๐ค ๐ค ๐ค ๐คข ๐คฃ ๐คค ๐คฆ ๐คง ๐คท ๐ฅ ๐ฆ'
emojis_to_extract = emojis_to_extract.split(' ')
```


```python
word_vectorizer_count = CountVectorizer(ngram_range=(1, 1),
                                        strip_accents='unicode', 
                                        tokenizer=nltk.tokenize.TweetTokenizer().tokenize,
                                        vocabulary=emojis_to_extract,
                                       )
```


```python
%%time
text_vectors = word_vectorizer_count.fit_transform(tweets.text)
print(text_vectors.shape)
```

    (134763, 362)
    CPU times: user 11.9 s, sys: 71.2 ms, total: 11.9 s
    Wall time: 15.1 s



```python
features = np.array(word_vectorizer_count.get_feature_names())
```

<div style="direction:rtl"> 
ูุงุจุฏ ุฃู ูุชุฃูุฏ ุฃู ุงูุฌุฏูู ุงูุฌุฏูุฏ ูุจูู ุจุดูู ุตุญูุญ.. ุณูุทุจุน ุชุบุฑูุฏุฉ ุนุดูุงุฆูุฉ ุฃููุงูุ ุซู ูุฑู ูุงูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงูุชู ุชุณุงูู 1 ูุฐุงุช ุงูุชุบุฑูุฏุฉ. ูุฌุจ ุฃู ูููู ุงูุงุซูุงู ูุชุณุงููุงู.
</div>


```python
idx = np.random.choice(tweets.shape[0], 1)[0]
print('Tweet:\t\t', tweets.text[idx], 
      '\nFeatures:\t\t', features[np.where(text_vectors.todense()[idx]>0)[1]]
     )
```

    Tweet:		  ุงุฐุง ูููุชู ุนุทููู ๐ค๐ 
    Features:		 ['๐' '๐ค']



```python
idx = np.random.choice(tweets.shape[0], 1)[0]
print('Tweet:\t\t', tweets.text[idx], 
      '\nFeatures:\t\t', features[np.where(text_vectors.todense()[idx]>0)[1]]
     )
```

    Tweet:		 ุฌุฏ ๐๐๐๐๐ ูุงุณูุงู ๐๐๐ ุฎูุต ููุง ูุณุง  
    Features:		 ['๐' '๐' '๐']



```python
idx = np.random.choice(tweets.shape[0], 1)[0]
print('Tweet:\t\t', tweets.text[idx], 
      '\nFeatures:\t\t', features[np.where(text_vectors.todense()[idx]>0)[1]]
     )
```

    Tweet:		  ูุชูุชู ุงูุญููู ูููุง ููุงุชู ููุทุจูุนู ๐ญโคโค๐ฅ  
    Features:		 ['โค' '๐ฅ' '๐ญ']


<div style="direction:rtl"> 
ูุจุฏู ุฃู ุงูุฃููุฑ ุนูู ูุง ูุฑุงู (ูุงุนุฏุง ุจุนุถ ุงูุฃุฎุทุงุก ุงููุชุนููุฉ ุจุชุฑููุฒ ุงููุตูุต ูููุณ ุจุณุจุจ ุฃุฏุงุกูุง ููุชุญููู).
</div>


```python
emoj_df = pd.DataFrame(text_vectors.todense(), columns=features)
```


```python
emoj_df.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โน</th>
      <th>...</th>
      <th>๐ค</th>
      <th>๐ค</th>
      <th>๐คข</th>
      <th>๐คฃ</th>
      <th>๐คค</th>
      <th>๐คฆ</th>
      <th>๐คง</th>
      <th>๐คท</th>
      <th>๐ฅ</th>
      <th>๐ฆ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows ร 362 columns</p>
</div>




```python
tweets_emoj = pd.concat([tweets.city, emoj_df], axis=1, ignore_index=False)
```


```python
tweets_emoj.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>city</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>...</th>
      <th>๐ค</th>
      <th>๐ค</th>
      <th>๐คข</th>
      <th>๐คฃ</th>
      <th>๐คค</th>
      <th>๐คฆ</th>
      <th>๐คง</th>
      <th>๐คท</th>
      <th>๐ฅ</th>
      <th>๐ฆ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Riyadh</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Riyadh</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Riyadh</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Riyadh</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Riyadh</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows ร 363 columns</p>
</div>



<div style="direction:rtl"> 
ุจุนุฏ ุฃู ุชู ุจูุงุก ุงูุฌุฏูู ุจุดูู ุณููู ูุฅุถุงูุฉ ุฎุงูุฉ ุงููุฏููุฉุ ุณูููู ุงูุขู ุจุงูุฎุทูุฉ ุงูููุงุฆูุฉ ููู ุชุฌููุน ุงูุตููู ูุชุตุจุญ ุงููุฏููุฉ ูู ุฎุงูุฉ ุงูุตููู ูุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ูู ุฎุงูุฉ ุงูุฃุนูุฏุฉ. ุงูุฃุฑูุงู ุงูุขู ุณุชูุซู ูุฌููุน ุงููุฑุงุช ุงูุชู ุงุณุชุฎุฏู ูููุง ุฑูุฒ ุชุนุจูุฑู ูุง ูู ุงูุชุบุฑูุฏุงุช ุงููุงุฏูุฉ ูู ูุฏููุฉ ูุง. ุทุจุนุช ุฑุฃุณ ุงูุฌุฏูู ููุฑู ููู ูุจุฏู ุฐูู.
</div>


```python
tweets_emoj_city = tweets_emoj.groupby(['city']).agg(np.sum)
```


```python
tweets_emoj_city.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โน</th>
      <th>...</th>
      <th>๐ค</th>
      <th>๐ค</th>
      <th>๐คข</th>
      <th>๐คฃ</th>
      <th>๐คค</th>
      <th>๐คฆ</th>
      <th>๐คง</th>
      <th>๐คท</th>
      <th>๐ฅ</th>
      <th>๐ฆ</th>
    </tr>
    <tr>
      <th>city</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Abha</th>
      <td>4</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>12</td>
      <td>0</td>
      <td>3</td>
      <td>222</td>
      <td>...</td>
      <td>2</td>
      <td>0</td>
      <td>7</td>
      <td>23</td>
      <td>5</td>
      <td>97</td>
      <td>1</td>
      <td>0</td>
      <td>18</td>
      <td>3</td>
    </tr>
    <tr>
      <th>Al-Kharj</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>47</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>8</td>
      <td>18</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Buraidah</th>
      <td>1</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
      <td>4</td>
      <td>5</td>
      <td>116</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>23</td>
      <td>3</td>
      <td>24</td>
      <td>2</td>
      <td>1</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Dammam</th>
      <td>1</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>0</td>
      <td>12</td>
      <td>4</td>
      <td>3</td>
      <td>182</td>
      <td>...</td>
      <td>2</td>
      <td>3</td>
      <td>3</td>
      <td>101</td>
      <td>8</td>
      <td>167</td>
      <td>1</td>
      <td>4</td>
      <td>14</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Hail</th>
      <td>2</td>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>16</td>
      <td>1</td>
      <td>1</td>
      <td>149</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>4</td>
      <td>88</td>
      <td>0</td>
      <td>8</td>
      <td>15</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
<p>5 rows ร 362 columns</p>
</div>



<div style="direction:rtl"> 
ูุจู ุฃู ูุจุฏุฃ ุฃู ุชุญููู (ูุนู ูู ูุญูู ุดูุฆุงู ุจุนุฏ!)ุ ูู ุงููุถุญ ุฃู ูุฏููุง ูุดููุฉ ูู ุชูุฒูุน ุงุณุชุฎุฏุงูุงุช ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุจูู ุงููุฏู. ููุฏููุฉ ูุงูุฑูุงุถ ููุฌุฏ ุจูุง ุนุฏุฏ ูุงุฆู ูู ุงููุบุฑุฏูู ูุนุฏุฏ ูุงุฆู ูู ุงูุชุบุฑูุฏุงุช ูุฐูู ููู ุบูุฑ ุงูููุทูู ููุงุฑูุชูุง ูุน ูุฏููุฉ ูุฌุฑุงู ูุซูุงู ุจุฏูู ุงุญุชุณุงุจ ุงูุชูุงูุช ูู ุนุฏุฏ ุงูุชุบุฑูุฏุงุช ูุนุฏุฏ ุงููุบุฑุฏูู.

<br/> <br/>

ูุญู ูุฐุง ุงูุฅุดูุงูุ ุณูููู ุจุชุบููุฑ ุงูุฃุฑูุงู ูุชุนูุณ ุงููุณุจ (ุฏุงุฎู ุงููุฏููุฉ) ูุฐูู ุจูุณูุฉ ุนุฏุฏ ูุฑุงุช ุงุณุชุฎุฏุงู ุฃู ุฑูุฒ ุชุนุจูุฑู ( ูุซูุงู ุงููุฌู ุงูุถุงุญู) ุฏุงุฎู ูุฏููุฉ ูุง ุจุนุฏุฏ ุงููุฌูุฏ ุงูุชุนุจูุฑูุฉ ูู ุชุบุฑูุฏุงุช ุชูู ุงููุฏููุฉ. ุจุนุฏ ูุฐู ุงูุฎุทูุฉ ูุณุชุทูุน ุฃู ููุงุฑู ุจูู ุงููุฏู ููููู ูุซูุง ุฃู ูุณุจุฉ ุงุณุชุฎุฏุงู ุงููุฌู ุงูุถุงุญู ุฏุงุฎู ุงูุฑูุงุถ ุฃูุซุฑ ูู ูุณุจุฉ ุงุณุชุฎุฏุงู ุงููุฌู ุงูุถุงุญู ุฏุงุฎู ูุฌุฑุงู ุจุงูุฑุบู ูู ุงุฎุชูุงู ุนุฏุฏ ุงูุชุบุฑูุฏุงุช ูู ูู ูุฏููุฉ.
</div>


```python
tweets_emoj_city_size = tweets_emoj.groupby(['city']).size()
```


```python
tweets_emoj_city_ratio = np.divide(tweets_emoj_city, np.sqrt(tweets_emoj_city_size[:,None]))
```

<div style="direction:rtl"> 
ุฃุฏูุงู ุดูู ุงูุฌุฏูู ุงูููุงุฆู ูุงูุฐู ูุชููู ุงูุขู ูู ูุณุจ ุจุฏูุงู ูู ุฃุฑูุงู ุตุญูุญุฉ.

<br />

ููุฅุฌุงุจุฉ ุนู ุณุคุงููุง ุงูุฃููุ ูุณุชุทูุน ูุจุงุดุฑุฉ ุฃู ูุญุชุณุจ "ูุชูุณุท" ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุฏุงุฎู ูู ูุฏููุฉ ูุซู ูุฑุชุจ ุงููุชุงุฆุฌ ุชุตุงุนุฏูุงู ููุฑู ุฃู ุงููุฏู ูุฏููุง ุฃูุจุฑ ุนุฏุฏ ูู ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ (ููุงูุฉ ุงููุงุฆูุฉ) ูุฃู ุงููุฏู ูุฏููุง ุฃูู ุนุฏุฏ ูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ (ุจุฏุงูุฉ ุงููุงุฆูุฉ).

</div>


```python
tweets_emoj_city_ratio.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โ</th>
      <th>โน</th>
      <th>...</th>
      <th>๐ค</th>
      <th>๐ค</th>
      <th>๐คข</th>
      <th>๐คฃ</th>
      <th>๐คค</th>
      <th>๐คฆ</th>
      <th>๐คง</th>
      <th>๐คท</th>
      <th>๐ฅ</th>
      <th>๐ฆ</th>
    </tr>
    <tr>
      <th>city</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Abha</th>
      <td>0.041536</td>
      <td>0.020768</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.041536</td>
      <td>0.124609</td>
      <td>0.000000</td>
      <td>0.031152</td>
      <td>2.305257</td>
      <td>...</td>
      <td>0.020768</td>
      <td>0.000000</td>
      <td>0.072688</td>
      <td>0.238833</td>
      <td>0.051920</td>
      <td>1.007252</td>
      <td>0.010384</td>
      <td>0.000000</td>
      <td>0.186913</td>
      <td>0.031152</td>
    </tr>
    <tr>
      <th>Al-Kharj</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.040639</td>
      <td>0.000000</td>
      <td>0.020319</td>
      <td>0.955016</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.020319</td>
      <td>0.000000</td>
      <td>0.020319</td>
      <td>0.162556</td>
      <td>0.365751</td>
      <td>0.000000</td>
      <td>0.020319</td>
      <td>0.060958</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>Buraidah</th>
      <td>0.012537</td>
      <td>0.037612</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.125373</td>
      <td>0.050149</td>
      <td>0.062686</td>
      <td>1.454324</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.012537</td>
      <td>0.288357</td>
      <td>0.037612</td>
      <td>0.300895</td>
      <td>0.025075</td>
      <td>0.012537</td>
      <td>0.050149</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>Dammam</th>
      <td>0.008719</td>
      <td>0.026157</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.043595</td>
      <td>0.000000</td>
      <td>0.104629</td>
      <td>0.034876</td>
      <td>0.026157</td>
      <td>1.586874</td>
      <td>...</td>
      <td>0.017438</td>
      <td>0.026157</td>
      <td>0.026157</td>
      <td>0.880628</td>
      <td>0.069753</td>
      <td>1.456088</td>
      <td>0.008719</td>
      <td>0.034876</td>
      <td>0.122067</td>
      <td>0.017438</td>
    </tr>
    <tr>
      <th>Hail</th>
      <td>0.018734</td>
      <td>0.046835</td>
      <td>0.009367</td>
      <td>0.009367</td>
      <td>0.000000</td>
      <td>0.009367</td>
      <td>0.149873</td>
      <td>0.009367</td>
      <td>0.009367</td>
      <td>1.395697</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.009367</td>
      <td>0.028101</td>
      <td>0.206076</td>
      <td>0.037468</td>
      <td>0.824304</td>
      <td>0.000000</td>
      <td>0.074937</td>
      <td>0.140506</td>
      <td>0.037468</td>
    </tr>
  </tbody>
</table>
<p>5 rows ร 362 columns</p>
</div>




```python
tweets_emoj_city_ratio.mean(axis=1).sort_values()
```




    city
    Najran            0.177028
    Jazan             0.182721
    Khamis Mushait    0.251193
    Al-Kharj          0.312089
    Yanbu             0.333752
    Taif              0.360855
    Jubail            0.388580
    Hofuf             0.410994
    Tabuk             0.448958
    Buraidah          0.492625
    Khobar            0.649636
    Abha              0.668996
    Hail              0.695209
    Dammam            0.713978
    Riyadh            0.723166
    Medina            0.732782
    Jeddah            0.736642
    Mecca             0.748855
    Qatif             0.826966
    dtype: float64



<div style="direction:rtl"> 
ููุง ูุณุชุทูุน ุนูู ุฐุงุช ุงูุดูุก ูุน ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ. ููู ุฃุฎุฐ ูุชูุณุท ูุณุจ ุงุณุชุฎุฏุงู ูู ุฑูุฒ ุชุนุจูุฑู ูู ุฌููุน ุงููุฏู ููุนุฑู ูุงูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู
</div>


```python
tweets_emoj_city_ratio.mean(axis=0).sort_values()[::-1][:10]
```




    ๐    29.799377
    ๏ธ    20.908354
    โค    18.033336
    ๐    13.382810
    ๐ญ    10.055071
    ๐     9.735467
    ๐     5.278099
    ๐ป     3.945968
    ๐น     3.881957
    ๐     3.713981
    dtype: float64



<div style="direction:rtl"> 
ุฃู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงูุฃูู ุงุณุชุฎุฏุงูุงู...
</div>


```python
tweets_emoj_city_ratio.mean(axis=0).sort_values()[:10]
```




    ๐    0.000000
    ๐    0.000000
    ๐    0.000000
    ๐    0.000462
    ๐    0.001069
    ๐    0.002823
    ๐    0.003647
    ๐    0.004194
    ๐    0.004369
    ๐    0.004648
    dtype: float64



<div style="direction:rtl"> 
ููุง ูุณุชุทูุน ุชูุซูู ูุฐู ุงูุจูุงูุงุช ูู ุดูู ูุณูู ูููู ูููุง ูุนุฑู ุจ "ุงูุฎุฑุงุฆุท ุงูุญุฑุงุฑูุฉ". ุจูู ุจุณุงุทุฉุ ูู ุฅุนุงุฏุฉ ุฑุณู ูุฐุงุช ุงูุฌุฏูู ุจููุณ ุงูุดููุ ูููู ุงูุฃุฑูุงู ุงูุขู ูุชู ุชุญููููุง ุฅูู ุฃููุงู ูุฃุฎูุฐุฉ ูู ุทูู ูููู ูุฌุนู ูู ุงูุณูู ุฑุคูุฉ ุงูููู ุงูุนุงููุฉ ูุงูููู ุงููุชุฏููุฉ.
</div>


```python
fig, ax = plt.subplots(figsize=(15,5))
sns.heatmap(tweets_emoj_city_ratio, ax=ax)
```




    <matplotlib.axes._subplots.AxesSubplot at 0x11aab2400>




![png](output_51_1.png)


<div style="direction:rtl"> 
ูุจุฏู ุฃู ูุฏููุง ูุดููุฉ ุดุจููุฉ ูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ูููุง ูุฎุต ุงุฎุชูุงู ุชูุฒูุน ุงูุงุณุชุฎุฏุงู. ูุงููุฌู ุงูุถุงุญู ูุซูุงู ูุญุชู ุงููุฑูุฒ ุงูุฃูู ูุจุงูุชุงูู ุณุชููู ูุณุจุชู ุนุงููุฉ ูู ุฃุบูุจ ุงููุฏู (ููู ุจุงูููุงุณุจุฉ ุฃุญุฏ ุงูุฎุทูุท ุงูุนููุฏูุฉ ุงูุฏุงููุฉ ูู ุงูุดูู ุฃุนูุงู). ููุฐุง ูู ูุฌุนููุง ูุนุฑู ุฅู ูุงูุช ูุฏููุฉ ูุง ุชุณุชุฎุฏูู ุจุดูู ุฃูุซุฑ ูู ูุฏู ุฃุฎุฑู (ุจุนุฏ ุฃุฎุฐ ูู ุงูุนูุงูู ุงูุฃุฎุฑู ุจุงูุงุนุชุจุงุฑ). ููุง ุงูุญู ูุน ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุ

<br> <br>

ุงูุญู ุจุณูุท ุฌุฏุงู. ููุฑ ูุซูุงู ููู ุณููุงุฑู ุจูู ุฑูุฒ ุงููุฌู ุงูุถุงุญู ูุฑูุฒ ุงููุชุงุฉ ุงูุฑุงูุตุฉ. ูุญู ูุนุฑู ุฃู "ูุชูุณุท" ุงุณุชุฎุฏุงู ุงูุฑูุฒูู ูุฎุชูู ุฃุณุงุณุงู ูุจุงูุชุงูู ููู ุฑูุฒ ุชูุฒูุน ูุฎุชูู ุจูู ุงููุฏู. ุฃุจุณุท ุญู ูู ุฃู ูููู ุจุชุซุจูุช ูุฐุง ุงููุชูุณุท ุนูุฏ ูููุฉ ูุญุฏุฏุฉ ููู ุงูุฑูุฒูู ููุชููู ุจุนุฏูุง ูู ุงูููุงุฑูุฉ ุงูุนุงุฏูุฉ. ูุฐุง ุจูุบุฉ ุงูุฅุญุตุงุก ูุณูู 
<a href="https://en.wikipedia.org/wiki/Normalization_(statistics)">Normalization</a> ูุฃุจุณุท ุฃููุงุนู ูุณูู z-scoring ููุนูู ุทุฑุญ ูููุฉ ุงููุชูุณุท ูู ููู ุงูุชูุฒูุน ููุตุจุญ ุงููุชูุณุท ุงูุฌุฏูุฏ ูู ุตูุฑุ ุซู ูุณูุฉ ููู ุงูุชูุฒูุน ุนูู ุงูุงูุญุฑุงู ุงููุนูุงุฑู ููุตุจุญ ุงูุงูุญุฑุงู ุงููุนูุงุฑู ููุญุฏุงู ุจูู ุงูุฑููุฒ ูุฐูู.

</div>


```python
df_scaled = (tweets_emoj_city_ratio - tweets_emoj_city_ratio.mean(axis=0)) / tweets_emoj_city_ratio.std(axis=0)
```

<div style="direction:rtl"> 
ูููุง ูู ูุงุถุญ ูู ุงูุดูู ุงูุชุงููุ ูุณุชุทูุน ุฃู ูุฑู ุงูุฃููุงุท ุงููุฎุชููุฉ ููู ุฑูุฒ ุชุนุจูุฑู ุจุดูู ุฃูุถุญ. 

ุฎุฐ ุจุงูุงุนุชุจุงุฑ ุฃู ูุชูุณุท ุงุณุชุฎุฏุงู ูู ุฑูุฒ ุชุนุจูุฑู ูู ุตูุฑ. ุจุงูุชุงููุ ุญูููุง ุชุฃุฎุฐ ุฃู ูุฏููุฉ (ููุฃุฎุฐ ุฃุจูุง ูุซูุงู)ุ ุณุชุฌุฏ ุฃู ุงูููู ุงูููุฌุจุฉ (ุงูููุงุท ุงูุญูุฑุงุก) ุชูุซู ูุนุฏู ุงุณุชุฎุฏุงู ุฃุนูู ูู ุจุงูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉุ ูููุง ุงูููู ุงูุณุงูุจุฉ (ุงูููุงุท ุงูุฒุฑูุงุก) ุชูุซู ูุนุฏู ุงุณุชุฎุฏุงู ุฃูู ูู ุจุงูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ.

</div>


```python
fig, ax = plt.subplots(figsize=(15,5))
sns.heatmap(df_scaled, ax=ax)
```




    <matplotlib.axes._subplots.AxesSubplot at 0x11be20e10>




![png](output_55_1.png)


<div style="direction:rtl"> 
ุจุนุฏ ูุฐู ุงูุฎุทูุฉ ุ ูุญู ุนูู ุฃุชู ุงูุฌุงูุฒูุฉ ููุฅุฌุงุจุฉ ุนู ุฃุจุฑุฒ ุงููุฌูู ุงูุชุนุจูุฑูุฉ ุงููุณุชุฎุฏูุฉ ุงูุชู ุชููุฒ ูุฏููุฉ ูุง ุนู ุงููุฏู ุงูุฃุฎุฑู ููุฐุง ูุง ุณูุฑุงู ููู ุงููุฏู.
</div>


```python
print('')
df_scaled = df_scaled.fillna(0)
for city in tweets.city.unique():
    print(city,':', ' '.join(df_scaled.loc[city].sort_values()[::-1].index[:15].tolist()))
    print('\n')
```

    
    Riyadh : ๐ ๐ ๐ฒ ๐ป ๐ผ ๐ค ๐ โ โฉ ๐ ๐ ๐ ๐ ๐ฒ ๐ฌ
    
    
    Tabuk : โ ๐ค ๐ ๐ ๐คฃ ๐ ๐ฟ โ โ ๐ ๐ฎ ๐ฆ ๐ฑ ๐ข ๐ณ
    
    
    Jeddah : ๐บ ๐ ๐ ๐ผ ๐ธ ๐ ๐ ๐บ ๐ถ โ ๐ ๐ข ๐ ๐ฃ ๐
    
    
    Hail : ๐ช ๐ ๐ฎ โก โฃ ๐น ๐ค ๐ป โ ๐ฌ ๐น ๐ ๐ค ๐ ๐ฒ
    
    
    Mecca : ๐ โฅ ๐ โ ๐ป โฟ ๐ผ โ ๐บ ๐ฎ ๐ญ ๐ฌ ๐ ๐ป ๐
    
    
    Medina : ๐ โคต ๐ช ๐ต ๐ ๐ค ๐ ๐ก ๐ฌ ๐จ ๐ ๐ ๐บ ๐ ๐ซ
    
    
    Jubail : ๐ง ๐ โ ๐ค ๐ ๐ถ ๐ ๐ถ ๐ฌ โ ๐ค ๐ ๐ โ ๐ญ
    
    
    Hofuf : ๐ต ๐ฐ ๐ง ๐ฅ ๐ญ ๐ ๐ด โ โ ๐ ๐ ๐ ๐ โบ ๐
    
    
    Jazan : ๐จ ๐ค โ ๐ณ ๐น โ ๐ ๐ฑ ๐ ๐ ๐ข ๐ โ ๐น ๐ฎ
    
    
    Al-Kharj : ๐ ๐ฒ ๐คค ๐ โช ๐ ๐ฐ ๐น โ โฌ ๐ฑ ๐บ ๐ ๐ฅ ๐
    
    
    Taif : ๐ญ ๐ โ ๐จ ๐ ๐ถ ๐ฅ โญ ๐ฆ โ ๐ง ๐ ๐ ๐ โฝ
    
    
    Qatif : ๐ญ ๐คท ๐ค ๐ ๐ฟ ๐ ๐ ๐ก ๐ ๐ฐ ๐ โ ๐ ๐คฆ ๐
    
    
    Dammam : ๐ฑ ๐ฐ ๐ผ ๐ฃ ๐ ๐ ๐ซ ๐ โฌ ๐ฐ ๐ ๐ฑ ๐ฆ โ ๐ผ
    
    
    Abha : ๐ ๐ ๐ญ ๐ป ๐ฏ ๐จ ๐ ๐พ ๐ ๐ต ๐ โ ๐ถ ๐ฐ ๐
    
    
    Khamis Mushait : ๐ฅ ๐ ๐ ๐ซ ๐ ๐ ๐ ๐ ๐ฅ ๐ซ ๐ ๐ ๐ฒ ๐จ ๐ป
    
    
    Najran : ๐ต ๐ฑ ๐ โ ๐ ๐ท ๐ ๐ฎ ๐ ๐น ๐ ๐ท โ โช ๐ด
    
    
    Buraidah : ๐ ๐ โ โซ ๐ฃ ๐น ๐ ๐พ ๐ ๐ ๐ฟ โ ๐ฅ ๐ ๐ช
    
    
    Yanbu : ๐ณ ๐ ๐พ ๐ง ๐ฉ ๐ ๐ ๐ช โป ๐ ๐ ๐ ๐น ๐ด โฝ
    
    
    Khobar : ๐ฏ โจ ๐ โ โ ๐ง ๐ ๐ ๐ค ๐ฅ ๐ ๐ฉ ๐ฆ ๐คง ๐คข
    
    


<div style="direction:rtl"> 

ุจูุงุก ุนูู ุงูุดูู ุฃุนูุงู ุณุฃุฐูุฑ ุงูุทุจุงุนู ุจุฎุตูุต ูุฐู ุงูุทุฑููุฉ ูุญุณุงุจ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงูุชู ุชููุฒ ูู ูุฏููุฉ ุนู ุฃุฎุฑู. ุฃุนุชูุฏ ุฃู ููุงู ุทุฑู ุฃูุซุฑ ูุชุงูุฉ ูุซูุฉ ูู ูุฐู ุงูุทุฑููุฉ ุงูุจุณูุทุฉ ูุซู 
<a href="https://en.wikipedia.org/wiki/Correspondence_analysis">Correspondence Analysis</a> ุฃู ุจูุงุก ุฌุฏูู ุนุฏุฏ ุงูุฑููุฒ ุฃุนูุงู ุจุทุฑููุฉ ูุฎุชููุฉ ูุซู ุงุณุชุฎุฏุงู ุฎูุงุฑุฒููุฉ 
<a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">TF-IDF</a> ุจุฏูุงู ูู ุงูุนุฏุฏ.

ููุง ุชุฑูุ ููุฐู ุงูุทุฑููุฉ ุฃุนูุงู ุชุซุจุช "ุงููุชูุณุท" ุจูู ุงููุฏู ููููู ูู ุงูุตูุฑ ูููููุง ูุงุฒููุง ูุฑู ุฃู ุงููุฏู ุงููุจุฑู ุงูุชู ุชูุชูู ูุตูุจุงู ุฃูุจุฑ ูู ุงูุชุบุฑูุฏุงุช ูุฏููุง ูุตูุจ ุงูุฐูุจ ูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ูุฐูู ููุฌูุฏ ุนุฏุฏ ูุจูุฑ ูู ุงูููู ุงูููุฌุจุฉ ูุฏู ุงููุฏู ุงููุจุฑู. ูุฐุง ุฅูุง ูุฏ ูุนูุณ ุงูุญูุงุฒุงู ูุนุฏุฏ ุงูุชุบุฑูุฏุงุชุ ุฃู ุฃู ุงููุบุฑุฏูู ูู ุงููุฏู ุงููุจุฑู ูุณุชุฎุฏููู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุจุดูู ุฃูุจุฑ ูู ุงููุบุฑุฏูู ูู ุจุงูู ุงููุฏู. ุฃููู ุดุฎุตูุงู ููุชูุณูุฑ ุงููุงุญู ูุฐูู ูุฃูู ุฃูุงุฏ ุฃุฑู "ููุทูุฉ ุญูุฑุงุก" ููู ูุฏููุฉ ุฃู ูุฌููุนุฉ ูู ุงูุฑููุฒ ุงูุชู ุชููุฒูุง ุนู ุบูุฑูุง ุนูู ุงูุฑุบู ูู ููุฉ ูููุฉ ุงูุชุบุฑูุฏุงุช ููู (ุดุงูุฏ ุงูุดูู ุฃุนูุงู). ุนูู ุฃูุฉ ุญุงูุ ูุฐู ุงูุทุฑููุฉ ูุงุฒุงูุช ูููุฏุฉ ููุนุฑูุฉ ุฃู ุงูุฑููุฒ ูู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ูู ุบูุฑ ุฃู ููุชุฑุซ ูููุฑููุงุช ุจูู ุงูุฑูุฒ ุงูุฃูู ูุงูุซุงูู ุฅู ูุงู ูุจูุฑุงู ุฃู ุถุฆููุงู.

</div>

<div style="direction:rtl; font-size:25px; text-align:right; font-weight: bold;" > 
ุชุญููู ุงููุดุงุนุฑ (Sentiment Analysis)
</div>

<div style="direction:rtl"> 
ุงูุขู ุณููุชูู ููุณุคุงู ุงูุชุงููุ ููู ุญูู ุงููุญุชูู ุงูุนุงุทูู ููุฑููุฒ ุงูุชุนุจูุฑูุฉ ูุงูุฐู ูุชุฑุงูุญ ูู ุฑููุฒ ุชุนุจูุฑูุฉ ุฅูุฌุงุจูุฉ (ูุงูููุจ ุฃู ุงููุฌู ุงูุถุงุญู) ุฅูู ุฑููุฒ ุชุนุจูุฑูุฉ ุณูุจูุฉ (ูุงููุฌู ุงูุจุงูู ุฃู ุงููุฌู ุงูุบุงุถุจ). ูุฏ ุชุจุฏู ูุฐู ูููุฉ ุตุนุจุฉุ ุฅุฐุง ููู ูุญุฏุฏ "ูููุฉ ุนุงุทููุฉ" ููู ูุฌู ุชุนุจูุฑูุ ูุญุณู ุงูุญุธุ ููุงู ูู ุณุจู ููุงู ุจูุฐู ุงููููุฉ. ููู 
<a href="http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0144296&type=printable">ูุฑูุฉ ุนูููุฉ</a>
ููุดูุฑุฉ ูู ูุฌูุฉ PLOS Oneุ ุงุณุชุฎุฏู ุงูุจุงุญุซูู ุญูุงูู ููููู ุชุบุฑูุฏุฉ ูู ุฃูุซุฑ ูู 13 ูุบุฉ ุฃูุฑูุจูุฉ ูุฃูุซุฑ ูู 82 ูุญูู ููุฎุฑุฌูุง ุจุจุญุซ ููุชุน ูุงู ูุฐุง ุงููุนุฌู ุงูุชุนุจูุฑู - ุงูุนุงุทูู ุฃุจุฑุฒ ูุชุงุฆุฌู. ูุงุญุธ ุฃูู ูุฏ ูููู ููุงู ุงุฎุชูุงูุงุช ุซูุงููุฉ ุทูููุฉ ุจูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ูู ุงูุชุบุฑูุฏุงุช ุงูุฃูุฑูุจูุฉ (ุณูุงุก ุจุงูุฅูุฌููุฒูุฉ ุฃู ุจุบูุฑูุง) ุฅูุง ุฃูู ุฃุนุชูุฏ ุฃู ูุฐู ุงููุณุงุฆู ุทูููุฉ ุนูููุงู ุฅุฐุง ูุง ูุงู ุงูุบุฑุถ ูู ุงููุนุฑูุฉ ุจุดูู ุนุงู ูููุณ ุชุตููู ูู ุชุบุฑูุฏุฉ ุนูู ุญุฏุฉ ูุซูุงู.

<br><br>
ุณุจู ูุฃู ูุณุฎุช 
<a href="http://kt.ijs.si/data/Emoji_sentiment_ranking/index.html">ุงูุฌุฏูู ุงููุฑูู ููุง</a>
ูู ุงููุฑูุฉ ููุตุจุญ ูู ุฌุฏูู ูุณุชูู ูุงุจู ูููุฑุงุกุฉ ูุงูุงุณุชุฎุฏุงู ุฏุงุฎู ุจุงูุซูู.

<br><br>

ูู ูุฐุง ุงูุฌุฏููุ ูุฌุฏ ุฃู ููู ุฑูุฒ ุชุนุจูุฑู "ุฏุฑุฌุฉ ุนุงุทููุฉ" ุชุชุฑุงูุญ ูู +1 ุฅูู -1ุ ุฃู ูู ููุฌุจ ุฅูู ุณุงูุจ (ูููุง ุงูุตูุฑ ูุนุชุจุฑ ูุญุงูุฏ). ุณูููู ุจูุฑุงุกุฉ ูู ุชุบุฑูุฏุฉ ูุงุณุชุฎุฑุงุฌ ูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ูููุงุ ุซู ุญุณุงุจ ูุชูุณุท "ุงูุฏุฑุฌุฉ ุงูุนุงุทููุฉ" ููุชุบุฑูุฏุฉ ุจูุงุก ุนูู ุงูุฑููุฒ ุงููุณุชุฎุฏูุฉ (ูุฏ ูุฌุงุฏููู ุงูุจุนุถ ูู ูุฐุง ุงูุชูุฌูุ ูููู ูุฐุง ูู ุงูุทุฑูู ุงูุฃุจุณุท ุนูู ุฃูุฉ ุญุงู).

</div>


```python
senti = pd.read_csv('./data/sentiment_scores.csv')
```


```python
senti.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Char</th>
      <th>Image</th>
      <th>Unicodecodepoint</th>
      <th>Occurrences</th>
      <th>Position</th>
      <th>Neg</th>
      <th>Neut</th>
      <th>Pos</th>
      <th>Sentiment</th>
      <th>bar</th>
      <th>name</th>
      <th>block</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>๐</td>
      <td>๐</td>
      <td>0x1f602</td>
      <td>14622.0</td>
      <td>0.805</td>
      <td>0.247</td>
      <td>0.285</td>
      <td>0.468</td>
      <td>0.221</td>
      <td></td>
      <td>FACE WITH TEARS OF JOY</td>
      <td>Emoticons</td>
    </tr>
    <tr>
      <th>1</th>
      <td>โค</td>
      <td>โค</td>
      <td>0x2764</td>
      <td>8050.0</td>
      <td>0.747</td>
      <td>0.044</td>
      <td>0.166</td>
      <td>0.790</td>
      <td>0.746</td>
      <td></td>
      <td>HEAVY BLACK HEART</td>
      <td>Dingbats</td>
    </tr>
    <tr>
      <th>2</th>
      <td>โฅ</td>
      <td>โฅ</td>
      <td>0x2665</td>
      <td>7144.0</td>
      <td>0.754</td>
      <td>0.035</td>
      <td>0.272</td>
      <td>0.693</td>
      <td>0.657</td>
      <td></td>
      <td>BLACK HEART SUIT</td>
      <td>Miscellaneous Symbols</td>
    </tr>
    <tr>
      <th>3</th>
      <td>๐</td>
      <td>๐</td>
      <td>0x1f60d</td>
      <td>6359.0</td>
      <td>0.765</td>
      <td>0.052</td>
      <td>0.219</td>
      <td>0.729</td>
      <td>0.678</td>
      <td></td>
      <td>SMILING FACE WITH HEART-SHAPED EYES</td>
      <td>Emoticons</td>
    </tr>
    <tr>
      <th>4</th>
      <td>๐ญ</td>
      <td>๐ญ</td>
      <td>0x1f62d</td>
      <td>5526.0</td>
      <td>0.803</td>
      <td>0.436</td>
      <td>0.220</td>
      <td>0.343</td>
      <td>-0.093</td>
      <td></td>
      <td>LOUDLY CRYING FACE</td>
      <td>Emoticons</td>
    </tr>
  </tbody>
</table>
</div>




```python
tweets['score'] = tweets.text.apply(lambda x: senti.loc[[emoji in x for emoji in senti['Char']]]['Sentiment'].mean())
```

<div style="direction:rtl"> 
ุงูุขูุ ุจุนุฏ ุฃู ุตุงุฑ ููู ุชุบุฑูุฏุฉ "ุฏุฑุฌุฉ ุนุงุทููุฉ"ุ ูุณุชุทูุน ุฃู ูุฌุฑู ุญุณุงุจุงู ุจุณูุทุฉ ููุนุฑูุฉ ุชุฑุชูุจ ุงููุฏู ูู ูุฏู ุฅูุฌุงุจูุฉ/ุณูุจูุฉ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงููุณุชุฎุฏูุฉ ูููุง. ููุง ููุงุญุธ ูู ุงูุดูู ุงููุงุฏูุ ูุฏููุฉ ุญุงุฆู ุชุญุชู ุงูุฃููู ูู ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงูุฅูุฌุงุจูุฉ ูููุง ูุฏููุฉ ุงููุทูู ุชุนุชุจุฑ ุงูุฃุฎูุฑุฉ.
</div>


```python
tweets.groupby(['city']).agg({'score':np.mean}).sort_values(by='score').plot(kind='bar', figsize=(15,5))
```




    <matplotlib.axes._subplots.AxesSubplot at 0x11be06be0>




![png](output_65_1.png)


<div style="direction:rtl"> 
ูุฃุฎูุฑุงูุ ุณูููู ุจุงุณุชุฎุฏุงู "ุงูููุช" ููุนุฑูุฉ ุงุฎุชูุงู ุฃููุงุท ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงูุฅูุฌุงุจูุฉ ุฃู ุงูุณูุจูุฉ. ุงูุดูู ุงูุชุงูู ูุชููู ูู ุนุฏุฉ ุฃุดูุงู ูุตุบุฑุฉุ ุดูู ููู ูุฏููุฉ. ุนูู ูุญูุฑ ุงูุณููุงุช ูุฏููุง ุณุงุนุงุช ุงูููู (ูู ุงูุณุงุนุฉ 12 ุตุจุงุญุง ูู ุฃูุตู ุงููุณุงุฑ ุฅูู ููุชุตู ุงูููู  ููููุง)ุ ูููุง ุนูู ูุญูุฑ ุงูุตุงุฏุงุช ูุฏููุง ุชุฑูููุชุฑ ุงููุดุงุนุฑ ูู ุงูุชุบุฑูุฏุงุช ุงููุณุชุฎุฑุฌุฉ ูู ูุฐู ุงููุฏููุฉ.

<br><br>
ูุงุฑู ูุซูุงู ุฌุฏุฉ ูุงูุฑูุงุถ ( ูุงูุชู ุชููู ูุฒุงุฌุงู ุณูุฆุงู ูู ูุชุฑุฉ ุงูุธูุฑูุฉ) ูุบูุฑูุง ูู ุงููุฏู. ุฃุบูุจ ุงููุฏู ุชุฒูุฏ ุงููููุฉ ูููุง ุนู 0.3 ููู ุฐุงุช ุงููููุฉ ูู (ุงูุดูู 4) ูู ุงููุฑูุฉ ุณุงุจูุฉ ุงูุฐูุฑ ุญูููุง ุญุณุจูุง ูุชูุณุท ูููุฉ ุงููุดุงุนุฑ ููู ุงูุชุบุฑูุฏุงุช. ููุง ูุนูุณ ุจุดูู ูุง ุฃู ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงูุฅูุฌุงุจูุฉ ูุบูุจ ุนูู ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงูุณูุจูุฉ.. ูููุง ุชุจูู ุญุงุฆู ูุฏููุฉ "ุงูุฑููุงู".

</div>


```python
tweets.created_at = pd.to_datetime(tweets.created_at)
```


```python
pivoted = tweets.pivot_table('score', 
                              index=tweets.created_at.dt.hour, 
                              columns=tweets.city, 
                              aggfunc=np.mean)
pivoted.index.name = 'Hour'
plo = pivoted.plot(subplots=True, layout=(-1, 4), sharex=False, sharey=True, figsize=(18, 20))
```


![png](output_68_0.png)


<div style="direction:rtl; font-size:25px; text-align:right; font-weight: bold;" >
ุงูุฎุชุงู..
</div>

<div style="direction:rtl"> 

ูุง ุฃูุฏ ุงูุฅุทุงูุฉ ููุง ูุง ุฃูุฏ ููุงูุดุฉ ุงููุชุงุฆุฌ ุจุดูู ููุตู. ุจู ุฃุญุจ ุฏุงุฆูุงู ุฃู ุฃุชุฑู ุฎููุท ุชูุณูุฑ ููุชูุญุฉ ููู ุฃุฑุงุฏ ุฃู ูุชุนูู. ุจุงูุทุจุน ูุง ุฃุฑูุฏ ูุฃู ุฃุญุฏ ุฃู ูุชุนูู ูู ุชูุณูุฑ ูุฐู ุงููุชุงุฆุฌ ูุธุฑุงู ูููููุฉ ุงููุญุฏูุฏุฉ (ูุงูููุญุงุฒุฉ ุฅูู ุญุฏ ูุจูุฑ) ูู ุงูุชุบุฑูุฏุงุช. ูุฐุง ูุง ูุฌุนููุง ุบูุฑ ูููุฏุฉ ุจู ูู ููุทุฉ ุจุฏุงูุฉ ููู ุฃุญุจ ุงูุชุนูู.

<br><br>
ูุงู ุงููุฏู ูู ูุฐู ุงูุชุฏูููุฉ ุงูุชุญููููุฉ ูู ุฅุดุจุงุน ูุถููู ุงูุนููู ูุงูููุฏู ูู ุฎูุงู ุงูุนูู ุนูู ุชุญููู ุงูุจูุงูุงุช. ููุฃูู ุฃุนุฑู ุฃู ุงููุซูุฑ ูุนุชูุฑูู ุฐุงุช ุงููุถูู ููุฏููู ุฑุบุจุฉ ูุจูุฑุฉ ูุฅุฌุฑุงุก ุชุญูููุงุช ูุดุงุจูุฉ ููุฏ ูุฑุฑุช ุฃููุงู ุงุณุชุฎุฏุงู Jupyter Notebooks ููุชุงุจุฉ ุงูุชุฏูููุฉุ ุซู ูุดุงุฑูุฉ ุงููููุงุช ุงูุฃูููุฉ ูุชุตุจุญ ุงููุฑุตุฉ ูุชุงุญุฉ ูุฏู ุงูุฌููุน ูุฅุฌุฑุงุก ุฃู ุชุญูููุงุช ูุดุงุจูุฉ (ูู ุฏูู ุงูุญุงุฌุฉ ูุฅุจูุงุบู ุฃู ุงูุงุณุชุฆุฐุงู ููู ูู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช).

<br><br>
ุฃุชููู ุฃู ุชููู ูุฏ ุฑุงูุช ููู ูุฐู ุงูุชุฏูููุฉ ูุฃุดุจุนุช ูุถูููู ูุฐูู. ูุฑุจูุง ุฏูุนุช ุจู ุฅูู ุงูุชูููุฑ ูู ุทุฑู ุฅุจุฏุงุนูุฉ ูุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุนุงูุฉ ูููู ุงููุฌุชูุน ุงูุฐู ูุนูุด ููู ุจุดูู ุฃูุจุฑ ูุฃุฏู. ุฅู ูุงูุช ูุฏูู ุฃู ููุฑุฉ ูู ูุฐุง ุงููุจูู ูุฃุฑุฌู ุงูุชูุงุตู ูุนู ููุดุงุฑูุฉ ุงูููุชุฑุญุงุช ูุงูุฃููุงุฑ.

<br><br>

ุฅูู ุฃู ูุฑุงูู ูู ุงููุฑุฉ ุงููุงุฏูุฉ.. 
<a href="https://twitter.com/fahd09">ููุฏ</a>

</div>
